# TL Test Project

Проект демонстрирует древовидную структуру подразделений с сотрудниками на Django.  

## Технологии

- **Django 6**, Python 3.13 
- **django-mptt** — для построения древовидной структуры подразделений  
- **Faker** — для генерации 50 000 сотрудников  
- **Bootstrap 5** — для отображения дерева на фронтенде  
- **Docker & Docker Compose** — для быстрого поднятия проекта  

## Структура проекта

- `company/` — основное приложение с моделями, CBV, шаблонами и командой генерации сотрудников  
- `templates/company/` — шаблоны для отображения дерева подразделений  
- `static/company/` — CSS и JS для фронтенда  
- `management/commands/generate_employees.py` — команда для генерации сотрудников  
- `company/tests/` — автотесты для проверки корректности работы функции получения подразделений с сотрудниками  

## Настройка и запуск

1. Скопируйте `.env.example` в `.env` и заполните необходимые переменные окружения по образцу:

```
cp .env.example .env
```
Запуск проекта через Docker Compose:
```
docker-compose up --build -d
```
Контейнер автоматически выполнит:
```
python manage.py migrate

python manage.py generate_employees

python manage.py collectstatic --noinput

Запуск Gunicorn
```
После запуска проект будет доступен по адресу:

```
http://localhost:8001/
```
Админка Django
```
URL: /admin/
```

Особенности реализации
```
Подразделения строятся до 5 уровней вложенности

Сотрудники каждого подразделения выводятся в спойлере, дочерние подразделения — сразу

Используется prefetch_related, чтобы избежать N+1 проблем при 50k сотрудников

Функция get_departments_with_children централизует получение всех корневых подразделений с предзагруженными сотрудниками

Автотесты проверяют корректность работы функции, включая вложенные подразделения и наличие сотрудников

Тесты находятся в company/tests/ и используют django.test.TestCase

Проверяют, что функция получения подразделений возвращает правильные данные с сотрудниками для всех уровней вложенности
```
